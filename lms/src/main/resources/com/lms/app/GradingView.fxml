<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.lms.app.controller.GradingController" spacing="10" styleClass="card" style="-fx-padding: 20;">

    <Label text="Grading Dashboard" styleClass="h1"/>

    <HBox spacing="15" alignment="CENTER_LEFT" styleClass="card" style="-fx-padding: 15;">
        <Label text="Search Student ID:" style="-fx-font-weight: bold;"/>
        <TextField fx:id="searchIdField" promptText="ID" prefWidth="100"/>
        <Button text="Search" onAction="#searchStudent" styleClass="button-primary"/>
        
        <Separator orientation="VERTICAL"/>
        
        <VBox>
            <Label text="Student Details:" style="-fx-font-weight: bold; -fx-text-fill: #667eea;"/>
            <Label fx:id="studentInfoLabel" text="No student selected"/>
        </VBox>
        
        <Region HBox.hgrow="ALWAYS"/>
        <Button text="Reset / Show All" onAction="#resetFilter"/>
    </HBox>

    <TabPane tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
        <tabs>
            <Tab text="Pending Grading">
                <content>
                    <TableView fx:id="pendingTable">
                        <columns>
                            <TableColumn fx:id="studentCol" text="Student" prefWidth="150"/>
                            <TableColumn fx:id="assignCol" text="Assignment" prefWidth="250"/>
                            <TableColumn fx:id="dateCol" text="Due Date" prefWidth="100"/>
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                        </columnResizePolicy>
                    </TableView>
                </content>
            </Tab>
            <Tab text="Completed">
                <content>
                    <TableView fx:id="gradedTable">
                        <columns>
                            <TableColumn fx:id="gStudentCol" text="Student" prefWidth="150"/>
                            <TableColumn fx:id="gAssignCol" text="Assignment" prefWidth="250"/>
                            <TableColumn fx:id="gDateCol" text="Due Date" prefWidth="100"/>
                            <TableColumn fx:id="gScoreCol" text="Score" prefWidth="80"/>
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                        </columnResizePolicy>
                    </TableView>
                </content>
            </Tab>
        </tabs>
    </TabPane>
    
    <Button text="Open Student File" onAction="#openStudentFile" styleClass="button"/>
    
    <Separator/>
    <Label text="Grade Submission" style="-fx-font-weight: bold;"/>
    
    <HBox spacing="10">
        <VBox spacing="5">
            <Label text="Score:"/>
            <TextField fx:id="scoreField" prefWidth="80"/>
        </VBox>
        <VBox spacing="5" HBox.hgrow="ALWAYS">
            <Label text="Feedback:"/>
            <TextArea fx:id="feedbackArea" prefRowCount="3"/>
        </VBox>
    </HBox>
    
    <Button text="Submit Grade" onAction="#submitGrade" styleClass="button-success"/>
</VBox>
